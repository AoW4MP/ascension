<!DOCTYPE HTML>
<html lang="en">

<link rel="shortcut icon" type="image/x-icon" href="/aowp/favicon.ico" />

<head>
    <link rel="stylesheet" type="text/css" href="/aow4db/Style/style.css">
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

    <script id="unitsScript" type="text/javascript" language="javascript" src="/aow4db/Data/Units.json"></script>
    <script id="unitsScript" type="text/javascript" language="javascript" src="/aow4db/Data/EmpireProgression.json"></script>
    <script type="text/javascript" language="javascript" src="/aow4db/Data/Abiities.json"></script>
    <script type="text/javascript" language="javascript" src="/aow4db/Data/Builder.js"></script>

    <script>
        var general = [
            // A
            "town_hall_i_town_center:5:1:na",
            "throne:6:1:na:throne",


            // B


            "vendor:6:2:gold",
            "experimentation_chambers:7:2:gold&knowledge:dark",
            "shrine:8:2:mana",
            "clergy_commons:9:2:mana&gold:feudal",
            "library:10:2:research",
            "battle_ritual_site:11:2:unitprod&research:barbarian",
            "store_house:12:2:food",
            "workers_farmstead:13:2:food&production:industrious",
            "workshop:14:2:production&unitprod",
            "evocators_abode:15:2:production&unitprod&mana:mystic",
            "artisan_workshop:16:2:production&unitprod&happiness:high",
            "shipyard:18:2:fishery",


            // all the tome buildings
            "luxury_markets:20:2:na",
            "artisan_fortification:21:2:garrison",
            "fortified_crucible:22:2:garrison",
            "reagent_refinery:23:2:na",


            // C

            "palisade_walls:1:3:garrison",
            "market:6:3:gold",
            "underground_laboratory:7:3:gold:dark",
            "mana_obelisk:8:3:shrine",
            "tithe_shrine:9:3:clergy_commons:feudal",
            "arcane_institute:10:3:library",
            "ancestral_seer_hall:11:3:battle_ritual_site:barbarian",
            "granary:12:3:store_house",
            "grand_mill:13:3:workers_farmstead:industrious",
            "stonemason:14:3:workshop",
            "stone_conjurer:15:3:evocators_abode:mystic",
            "blacksmith:16:3:workshop",
            "lightforge:17:3:artisan_workshop:high",
            "fishmonger:18:3:fishery",

            // all the tome buildings
            "tower_of_true_sight:20:3:na:",
            "astral_trade_relay:21:3:na",
            "throne_of_mirrors:22:3:na",
            "temple_of_fertility:23:3:na",

            // D


            "mint:6:4:gold",

            "monolith:8:4:mana_obelisk",
            "academy:10:4:arcane_institute",
            "estate_hall:12:4:granary",
            "masonic_hall:14:4:stonemason",
            "armory:16:4:blacksmith",
            "grand_wharf:18:4:fishery",

            // all the tome buildins
            "tribunal:20:4:na:",
            "convent:21:4:na",
            "barons_palace:22:4:na",
            "monument_of_supremacy:23:4:na",




            // E


            "merchants_guild:6:5:gold",

            "mages_guild:8:5:monolith",
            "scholars_guild:10:5:academy",
            "farmers_guild:12:5:estate_hall",
            "workers_guild:14:5:masonic_hall",
            "smiths_guild:16:5:armory",
            "seafarers_guild:18:5:fishery",

            // all the tome buildins

            "temple_of_the_exalted:20:5:na",



            // F
            "town_hall_ii_castle:5:6:na",
            "town_hall_ii_bulwark:6:6:na",
            "town_hall_ii_communal_tent:7:6:na",
            "town_hall_ii_mages_plaza:8:6:na",
            "town_hall_ii_atrium_of_light:9:6:na",
            "town_hall_ii_dread_spire:10:6:na",


            // G
            "caltrop_stash:2:7:na",
            "arcane_battlements:3:7:na",
            "archer_battlements:4:7:na",

            "tavern:11:7:na",
            "interrogation_dungeon:12:7:na:dark",

            "wizard_tower_br__foundation:15:7:na:throne",


            // H

            "bathhouse:11:8:na",
            "ritual_mausoleum:12:8:na:dark",
            "wizard_tower_br__prison_cells:14:8:wizard_tower_br__foundation:throne",
            "wizard_tower_br__level_i:15:8:wizard_tower_br__foundation:throne",
            "wizard_tower_br__crypts:16:8:wizard_tower_br__foundation:throne",

            // I
            "town_hall_iii_citadel:5:9:na",
            "town_hall_iii_forge_tower:6:9:na",
            "town_hall_iii_halls_of_war:7:9:na",
            "town_hall_iii_mystic_spire:8:9:na",
            "town_hall_iii_pantheon:9:9:na",
            "town_hall_iii_stronghold:10:9:na",

            "wizard_tower_br__level_ii:15:9:wizard_tower_br__level_i:throne",
            "wizard_tower_br__room_of_recall:16:9:wizard_tower_br__level_i:throne",


            // J
            "stone_walls:1:10:garrison",
            "wizard_tower_br__apex:15:9:wizard_tower_br__level_ii:throne",
            "wizard_tower_br__channeling_chamber:16:9:wizard_tower_br__level_ii:throne",

            // K
            "ballista_towers:2:11:na",
            "necrotic_spires:3:11:na:tome",
            "healing_spires:4:11:na:tome",
            "wizard_tower_br__arcane_observatory:15:10:wizard_tower_br__apex:throne",
            "wizard_tower_br__teleportation_circle:16:10:wizard_tower_br__apex:throne",
            //L
            "town_hall_iv_grand_estate:5:12:na",
            "town_hall_iv_industry_compound:6:12:na",
            "town_hall_iv_warlords_pavilion:7:12:na",
            "town_hall_iv_wizards_auditorium:8:12:na",
            "town_hall_iv_solar_sanctum:9:12:na",
            "town_hall_iv_black_palace:10:12:na",

            //M
            "catapult_towers:2:13:na",
            "beacon_of_valor:3:13:na",
            "lords_manor:5:13:na",
            "bastions_barricade:6:13:na",
            "shrine_of_the_wargod:7:13:na",
            "altar_of_the_all-seers:8:13:na",
            "solar_nexus:9:13:na",
            "overlords_tower:10:13:na",




        ];






        $("#body").ready(function() {

            $("#header").load("/aow4db/HTML/header.html", function() {

                // wizard tower setup



                SetUpTreeNodes(general, "general");


                //    SetUpTreeNodes("nature", 5, "green");
                //    SetUpTreeNodes("chaos", 7, "red");
                //    SetUpTreeNodes("astral", 9, "cyan");
                //    SetUpTreeNodes("materium", 11, "orange");
                //    SetUpTreeNodes("order", 13, "yellow");
                //    SetUpTreeNodes("shadow", 15, "purple");

                SetCategories();
                SetLevelUpStuff();
            });





        });

        function SetUpTreeNodes(keyword, type) {

            var offset = 1;
            var i, x = "";
            var holder = document.getElementById("treeHolder" + type);
            var treespace = document.getElementById("treespace" + type);
            var nodeHeight = 100;
            var nodeWidth = 250;
            for (x in keyword) {

                var splits = keyword[x].split(":");

                var structure = splits[0];
                var row = parseInt(splits[1]);
                var column = parseInt(splits[2]);
                var type = splits[3];


                for (i in jsonStructureUpgrades.structures) {
                    if (jsonStructureUpgrades.structures[i].id === structure) {



                        var name = jsonStructureUpgrades.structures[i].name;

                        if (name.indexOf("<br>")) {
                            name = name.replaceAll("</br>", " ");
                            name = name.replaceAll("<br>", " ");

                            // name = name.replace("br", " ");
                        }

                        // name = name.split(":")[1];

                        var newNode = document.createElement("DIV");



                        //insert connection line

                        newNode.setAttribute("style", "grid-row:" + (row) + "; grid-column:" + column + ";");

                        //  newNode.innerHTML = name;
                        newNode.className = "entry";
                        var newNodeBackground = document.createElement("DIV");

                        var img = document.createElement("IMG");
                        img.setAttribute("src", "/aow4db/Icons/UpgradeIcons/" + jsonStructureUpgrades.structures[i].id + ".png");
                        img.setAttribute("height", "60px");
                        img.className = "structureNodeIcon";
                        newNode.setAttribute("id", jsonStructureUpgrades.structures[i].id);



                        var spa = document.createElement("SPAN");
                        spa.className = "structureNodeTitle";



                        newNodeBackground.className = "structureNode";



                        spa.innerHTML = "<span style=\"color:  #d7c297;\">" + name.toUpperCase() + "</span>" + "<br>";

                        if (splits[4]) {
                            newNodeBackground.setAttribute("style", "left:15px; top:-30px; width:190px");

                            if (splits[4] == "mystic") {

                                newNodeBackground.style.backgroundImage = "url(\"/aow4db/Icons/Text/mystic.png\")";
                                newNodeBackground.style.backgroundRepeat = "no-repeat";
                                newNodeBackground.style.backgroundPositionX = "140px";
                                newNodeBackground.style.backgroundSize = "80px";
                                newNodeBackground.style.backgroundColor = "#111";
                                spa.innerHTML = "<span style=\"color:  #9bc6ff;\">â¤·" + name.toUpperCase() + "</span>" + "<br>";
                            }
                            if (splits[4] == "barbarian") {
                                newNodeBackground.style.backgroundImage = "url(\"/aow4db/Icons/Text/barbarian.png\")";
                                newNodeBackground.style.backgroundRepeat = "no-repeat";
                                newNodeBackground.style.backgroundPositionX = "140px";
                                newNodeBackground.style.backgroundSize = "80px";
                                newNodeBackground.style.backgroundColor = "#111";
                                spa.innerHTML = "<span style=\"color:  red;\">â¤·" + name.toUpperCase() + "</span>" + "<br>";
                            }
                            if (splits[4] == "high") {
                                newNodeBackground.style.backgroundImage = "url(\"/aow4db/Icons/Text/high.png\")";
                                newNodeBackground.style.backgroundRepeat = "no-repeat";
                                newNodeBackground.style.backgroundPositionX = "140px";
                                newNodeBackground.style.backgroundSize = "80px";
                                newNodeBackground.style.backgroundColor = "#111";
                                spa.innerHTML = "<span style=\"color:  yellow;\">â¤·" + name.toUpperCase() + "</span>" + "<br>";
                            }
                            if (splits[4] == "feudal") {
                                newNodeBackground.style.backgroundImage = "url(\"/aow4db/Icons/Text/feudal.png\")";
                                newNodeBackground.style.backgroundRepeat = "no-repeat";
                                newNodeBackground.style.backgroundPositionX = "140px";
                                newNodeBackground.style.backgroundSize = "80px";
                                newNodeBackground.style.backgroundColor = "#111";
                                spa.innerHTML = "<span style=\"color:  grey;\">â¤·" + name.toUpperCase() + "</span>" + "<br>";
                            }
                            if (splits[4] == "dark") {
                                newNodeBackground.style.backgroundImage = "url(\"/aow4db/Icons/Text/dark.png\")";
                                newNodeBackground.style.backgroundRepeat = "no-repeat";
                                newNodeBackground.style.backgroundPositionX = "140px";
                                newNodeBackground.style.backgroundSize = "80px";
                                newNodeBackground.style.backgroundColor = "#111";
                                spa.innerHTML = "<span style=\"color:  #e92fe9;\">â¤·" + name.toUpperCase() + "</span>" + "<br>";
                            }
                            if (splits[4] == "industrious") {
                                newNodeBackground.style.backgroundImage = "url(\"/aow4db/Icons/Text/industrious.png\")";
                                newNodeBackground.style.backgroundRepeat = "no-repeat";
                                newNodeBackground.style.backgroundPositionX = "140px";
                                newNodeBackground.style.backgroundSize = "80px";
                                newNodeBackground.style.backgroundColor = "#111";
                                spa.innerHTML = "<span style=\"color:  orange;\">â¤·" + name.toUpperCase() + "</span>" + "<br>";
                            }

                            if (splits[4] == "throne") {
                                newNodeBackground.setAttribute("style", "left:0px; top:0px; width:220px");
                                newNodeBackground.style.backgroundImage = "url(\"/aow4db/Icons/Text/throne.png\")";
                                newNodeBackground.style.backgroundRepeat = "no-repeat";
                                newNodeBackground.style.backgroundPositionX = "100px";
                                newNodeBackground.style.backgroundSize = "80px";
                                newNodeBackground.style.backgroundColor = "#111";
                                spa.innerHTML = "<span style=\"color:  yellow;\">" + name.toUpperCase() + "</span>" + "<br>";
                            }
                            if (splits[4] == "tome") {
                                newNodeBackground.style.backgroundImage = "url(\"/aow4db/Icons/Text/knowledge.png\")";
                                newNodeBackground.style.backgroundRepeat = "no-repeat";
                                newNodeBackground.style.backgroundPositionX = "100px";
                                newNodeBackground.style.backgroundSize = "80px";
                                newNodeBackground.style.backgroundColor = "#111";
                                spa.innerHTML = "<span style=\"color:  white;\">" + name.toUpperCase() + "</span>" + "<br>";
                            }
                        }


                        var spa2 = document.createElement("SPAN");
                        spa2.setAttribute("style", "float:right");
                        var desc = document.createElement("SPAN");
                        desc.className = "structureNodeDesc";

                        var description = jsonStructureUpgrades.structures[i].prediction_description;
                        description = description.replaceAll("<bulletlist>", "");
                        description = description.replaceAll("<bullet>", "");
                        description = description.replaceAll("</bulletlist>", "");
                        description = description.replaceAll("</bullet>", "<br>");


                        spa2.innerHTML = "<span style=\"color:  #d7c297;\">" + name.toUpperCase() + "</span>" + "<br>";


                        spa2.innerHTML += jsonStructureUpgrades.structures[i].description + "<br>";
                        spa2.innerHTML += description + "<br>";
                        if (jsonStructureUpgrades.structures[i].requirement_description != "") {
                            spa2.innerHTML += "<br>Requirements:<bulletlist>" +
                                "<bullet>" + jsonStructureUpgrades.structures[i].requirement_description + "</bullet></bulletlist><br>";
                        }

                        if ('boost_requirements' in jsonStructureUpgrades.structures[i]) {
                            spa2.innerHTML += "<br>Boost Requirements:<bulletlist>" + "<bullet>" +
                                jsonStructureUpgrades.structures[i].boost_requirements + "</bullet></bulletlist>";
                        }




                        spa2.className = "tooltiptext";

                        // cost

                        var cost = document.createElement("DIV");
                        cost.setAttribute("style", "position:absolute; bottom:0px; right:0px");
                        cost.innerHTML = jsonStructureUpgrades.structures[i].cost;


                        newNode.appendChild(newNodeBackground);


                        newNodeBackground.append(spa);
                        newNodeBackground.append(cost);


                        newNodeBackground.append(img);

                        if (type != "na") {
                            var Type = document.createElement("DIV");
                            if (type.indexOf("&") != -1) {
                                var typeVar = type.split("&");

                                for (i = 0; i < typeVar.length; i++) {
                                    Type.innerHTML += "<" + typeVar[i] + "></" + typeVar[i] + "> ";

                                }



                            } else {
                                Type.innerHTML = "<" + type + "></" + type + ">";
                            }


                            Type.setAttribute("style", "position:absolute; bottom:40px; left:75px; z-index:3;");
                            //Type.setAttribute("style", "float:left; z-index:3");
                            newNodeBackground.append(Type);
                        }


                        newNode.appendChild(spa2);

                        holder.appendChild(newNode);

                    }



                }

            }

        }

        function drawLine(topPos, leftPos, angle, width) {
            var connectionLine = document.createElement("DIV");

            connectionLine.setAttribute("style", "top:" + topPos + "px; left:" + leftPos + "px; rotate:" + angle + "deg; background-color:" + "white" + "; width: +" + width + "px");
            connectionLine.className = "branch-line";
            return connectionLine;
        }

        function SetHeaderNodes(keyword, type) {

            var offset = 1;
            var i, x = "";
            var holder = document.getElementById("treeHolder" + type);
            var treespace = document.getElementById("treespace" + type);
            var nodeHeight = 150;
            for (x in keyword) {

                var splits = keyword[x].split(":");

                var structure = splits[0];
                var row = parseInt(splits[1]);
                var column = parseInt(splits[2]);
                var connectTo = splits[3];






                var newNode = document.createElement("DIV");

                newNode.setAttribute("style", "grid-row:" + (row) + "; grid-column:" + column + ";");

                //  newNode.innerHTML = name;
                newNode.className = "entry";
                var newNodeBackground = document.createElement("DIV");

                var img = document.createElement("IMG");
                img.setAttribute("src", "/aow4db/Icons/Text/" + structure + ".png");
                img.setAttribute("height", "50px");
                img.className = "structureNodeIcon";
                newNode.setAttribute("id", structure);



                var spa = document.createElement("SPAN");
                spa.innerHTML = structure.toUpperCase();

                //newNodeBackground.className = "structureNode";

                newNode.appendChild(newNodeBackground);
                newNodeBackground.append(spa);
                newNodeBackground.append(img);

                holder.appendChild(newNode);



            }

        }



        function SetBreakPoints() {
            CreateDiv(2, "1");
            CreateDiv(3, "2");
            CreateDiv(4, "3");
            CreateDiv(5, "4");
        }

        function SetCategories() {
            CreateCategory("Wizard Tower", 1241, 400, "#00807459", 1886, 1573);
            CreateCategory("Tome Buildings", 1245, 520, "#4c00ff30", 287, 2267);
            CreateCategory("Fortifications", 3470, 476, "#80808057", 622, 0);
            CreateCategory("Basic Income Buildings", 1245, 1600, "#b48d522b", 287, 595);
            CreateCategory("TII City", 260, 728, "#b48d522b", 1586, 485);
            CreateCategory("TIII City", 260, 728, "#b48d522b", 2549, 485);
            CreateCategory("TIV City", 260, 728, "#b48d522b", 3509, 485);
        }

        function CreateCategory(name, width, height, color, positionLeft, positionTop) {
            var holder = document.getElementById("treeHoldergeneral");
            var treespace = document.getElementById("treespacegeneral");
            var category = document.createElement("DIV");

            category.setAttribute("style", "width:" + width + "px; height:" + height + "px; position:absolute; top:" + positionTop + "px; left:" + positionLeft + "px; background-color:" + color + ";      border-style: solid;border-image: url(/aow4db/Icons/9slicetooltip.png);border-image-slice: 4 10 4 10 fill;");
            var categoryname = document.createElement("DIV");
            categoryname.innerHTML = name.toUpperCase();
            categoryname.setAttribute("Style", "position:absolute; top:2px; left:5px; color:white");
            category.appendChild(categoryname);
            holder.appendChild(category);
        }

        function CreateDiv(row, breakpoint) {
            var holder = document.getElementById("treeHoldergeneral");
            var treespace = document.getElementById("treespacegeneral");
            var breakline = document.createElement("DIV");

            breakline.setAttribute("style", "grid-row:" + row + "; grid-column:16; left: 30%; position: relative; color: grey; font-size:12px;top: 75%;");
            breakline.innerHTML = breakpoint;
            // add breaklines
            holder.appendChild(breakline);

            var breakline = document.createElement("DIV");

            breakline.setAttribute("style", "grid-row:" + row + "; grid-column:1; left: 60%; position: relative; color: grey;font-size:12px;top: 75%;");
            breakline.innerHTML = breakpoint;
            // add breaklines
            holder.appendChild(breakline);

            var toppos = (row * 150);
            var leftpos = 0;
            var color = "red";
            var connectionLine = document.createElement("DIV");
            connectionLine.setAttribute("style", "top:" + toppos + "px; left:" + leftpos + "px; rotate:0deg;width: 1100px;");


            connectionLine.className = "dotted-line";
            treespace.appendChild(connectionLine);



        }
    </script>


    <title>Age of Wonders 4 - City Tree</title>
</head>

<body>
    <div id="header"></div>

    <div id="General" class="w3-container w3-border city">>
        <div class="textblocktitle">
            City Tree
        </div>


        <div class="tree-space" id="treespacegeneral">

            <div class="tree-grid" id="treeHoldergeneral">
            </div>
        </div>
    </div>




</body></html>
<style>
    .branch-line {
        height: 4px;
        margin-top: -6px;
        position: absolute;

        transform-origin: left center;
        background-color: white;
        background-size: 10px;
        width: 25px;
    }

    .dotted-line {
        height: 4px;
        margin-top: -6px;
        position: absolute;

        transform-origin: left center;
        background-image: url(/aow4db/Icons/Interface/talents-arrow-line-gray.png);
        background-size: 10px;
        width: 25px;
    }

    .tree-grid {
        display: grid;
        grid-template-columns: repeat(14, 320px);
        grid-template-rows: repeat(23, 120px);
        position: absolute;
        height: auto;
        width: auto;
        background-color: black;
        background-image: url(/aow4db/Icons/Interface/citytree.png);
        background-size: 5584px;
        background-repeat: no-repeat;

        border-image: url(/aow4db/Icons/9slicetooltip.png);
        border-image-slice: 4 10 4 10 fill;
        border-style: solid;
        padding-top: 30px;
    }


    .tree-space {
        width: auto;
        height: auto;

        position: relative;
        /*  transform: scale(0.8);*/
    }

    .entry {
        background-color: transparent;
        color: aliceblue;
        text-align: center;
    }

    .structureNode {
        position: relative;



        background-image: url(/aow4db/Icons/tooltipBG.png);
        font-size: 11px;
        color: #bbcdf6;
        min-height: 60px;
        max-height: 130px;
        width: 225px;
        text-align: left;
        border-style: solid;
        border-image: url(/aow4db/Icons/9slicetooltip.png);
        border-image-slice: 4 10 4 10 fill;
        text-shadow: 2px 2px black;
        box-shadow: 0px 0px 5px 5px rgba(0, 0, 0, 0.3);

        padding: 5px;
        z-index: 2;
    }

    .entry:hover .tooltiptext {
        visibility: visible;

    }

    .structureNodeTitle {
        z-index: 2;
        left: 0px;
        position: relative;

    }

    .structureNodeDesc {
        z-index: 2;
        top: 20px;
        left: 61px;
        position: absolute;

    }


    .structureNodeIcon {

        z-index: 2;
        left: 0px;
        position: relative;


    }

    .structureNode:hover {
        filter: brightness(150%);

    }

</style>
<footer>
    <br>
    <br>
</footer>
